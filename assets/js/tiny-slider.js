/**
 * tiny-slider
 * @version 0.0.0
 * @author William Lin
 * @license The MIT License (MIT)
 **/
function extend(){for(var e,t,i,n=arguments[0]||{},o=1,a=arguments.length;a>o;o++)if(null!==(e=arguments[o]))for(t in e)i=e[t],n!==i&&void 0!==i&&(n[t]=i);return n}function addEvent(e,t,i){e=e||window;var n=t+Math.round(99999999*Math.random());e.attachEvent?(e["e"+n]=i,e[n]=function(){e["e"+n](window.event)},e.attachEvent("on"+t,e[n])):e.addEventListener(t,i,!1)}function addClass(e,t){var t=" "+t;-1===e.className.indexOf(t)&&(e.className+=t)}function removeClass(e,t){var t=" "+t;-1!==e.className.indexOf(t)&&(e.className=e.className.replace(t,""))}function getMapValues(e,t){for(var i=[],n=0;n<t.length;n++){var o=t[n];i.push(e[o])}return i}function getWindowWidth(){var e=document,t=window,i=t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth;return i}function getItem(e,t,i){var n=getWindowWidth();if(void 0!==e.length&&void 0!==t&&e.length===t.length){if(n<e[0])return i;if(n>=e[e.length-1])return t[t.length-1];for(var o=0;o<e.length-1;o++)if(n>=e[o]&&n<=e[o+1])return t[o]}}function getSupportedProp(e){for(var t=document.documentElement,i=0;i<e.length;i++)if(e[i]in t.style)return e[i]}function tinySlider(e){for(var t=void 0===e.container.length?[e.container]:e.container,i=0;i<t.length;i++){var n=e;n.container=t[i];var o=new tinySliderCore(n)}}function tinySliderCore(e){if(e=extend({container:document.querySelector(".tiny-slider"),items:1,slideByPage:!1,hasNav:!0,navText:["prev","next"],hasDots:!0,keyboard:!1,loop:!0,speed:250,autoplay:!1,autoplayTimeout:5e3,autoplayDirection:"forward",responsive:{500:2,800:3}},e||{}),this.container=e.container,this.children=this.container.children,this.childrenLength=this.childrenUpdatedLength=e.childrenLength=this.children.length,this.hasNav=e.hasNav,this.navText=e.navText,this.hasDots=e.hasDots,this.keyboard=e.keyboard,this.loop=e.loop,this.autoplay=e.autoplay,this.autoplayTimeout=e.autoplayTimeout,this.autoplayDirection="forward"===e.autoplayDirection?1:-1,this.slideByPage=e.slideByPage,this.responsive=e.responsive,this.bp=this.responsive&&"object"==typeof this.responsive?Object.keys(this.responsive):!1,this.vals=this.responsive&&"object"==typeof this.responsive?getMapValues(this.responsive,this.bp):!1,this.itemsMax=void 0!==this.vals.length?Math.max.apply(Math,this.vals):this.items,this.items=getItem(this.bp,this.vals,e.items),this.speed=this.slideByPage?e.speed*this.items:e.speed,this.animating=!1,this.index=0,!(this.childrenLength>=this.itemsMax))throw new TypeError("items are not enough to show on 1 page");this.init();var t=this,i;addEvent(window,"resize",function(){clearTimeout(i),i=setTimeout(function(){t.items=getItem(t.bp,t.vals,e.items),t.speed=t.slideByPage?e.speed*t.items:e.speed,t.updateContainer(t),t.updateDots(t)},100)}),addEvent(this.next,"click",function(){tinySliderCore.prototype.onNavClick(t,1)}),addEvent(this.prev,"click",function(){tinySliderCore.prototype.onNavClick(t,-1)}),this.keyboard&&addEvent(document,"keydown",function(e){e=e||window.event,37===e.keyCode?tinySliderCore.prototype.onNavClick(t,-1):39===e.keyCode&&tinySliderCore.prototype.onNavClick(t,1)});for(var n=0;n<this.dots.length;n++)addEvent(this.dots[n],"click",function(e){for(var i,n=0;n<t.dots.length;n++)target=e.currentTarget?e.currentTarget:e.srcElement,t.dots[n]===target&&(i=n);tinySliderCore.prototype.onDotClick(t,i)});this.autoplay&&setInterval(function(){tinySliderCore.prototype.onNavClick(t,t.autoplayDirection)},t.autoplayTimeout)}Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t=[],i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t});var tdProp=getSupportedProp(["transitionDuration","MozTransitionDuration","WebkitTransitionDuration"]);tinySliderCore.prototype={init:function(){addClass(this.container,"tiny-content");var e=this.container.parentNode,t=this.container.nextSibling,i=document.createElement("div"),n=i.cloneNode(!0);if(n.className="tiny-slider",n.appendChild(this.container),t?e.insertBefore(n,t):e.appendChild(n),this.hasDots){var o=i.cloneNode(!0),a=i.cloneNode(!0);o.className="tiny-dots",a.className="tiny-dot";for(var s=this.childrenLength-1;s>=0;s--){var r=s>0?a.cloneNode(!0):a;o.appendChild(r)}n.appendChild(o),this.dots=o.querySelectorAll(".tiny-dot")}if(this.hasNav){var d=i.cloneNode(!0),h=i.cloneNode(!0),l=i.cloneNode(!0);d.className="tiny-nav",h.className="tiny-prev",l.className="tiny-next",(this.navText.length=2)&&(h.innerHTML=this.navText[0],l.innerHTML=this.navText[1]),d.appendChild(h),d.appendChild(l),n.appendChild(d),this.prev=h,this.next=l}if(this.loop){for(var s=0;s<this.itemsMax;s++){var c=this.children[s].cloneNode(!0),p=this.children[this.children.length-1-s].cloneNode(!0),u=this.container.children[0];this.container.appendChild(c),this.container.insertBefore(p,u)}this.childrenUpdatedLength=this.container.children.length,this.children=this.container.children}for(var s=0;s<this.childrenUpdatedLength;s++)this.children[s].style.width=100/this.childrenUpdatedLength+"%";this.updateContainer(this),this.updateDots(this),this.updateDotsStatus(this)},updateContainer:function(e){e.loop&&(e.container.style.marginLeft=-(100*e.itemsMax/e.items)+"%"),e.container.style.width=100*e.childrenUpdatedLength/e.items+"%",e.container.style.left=-(100*e.index/e.items)+"%"},updateDots:function(e){for(var t=Math.ceil(e.childrenLength/e.items),i=e.dots,n=0;n<i.length;n++)t>n?removeClass(i[n],"tiny-hide"):addClass(i[n],"tiny-hide")},updateDotsStatus:function(e){var t,i=e.index,n=e.dots,o=Math.ceil(e.childrenLength/e.items);if(0>i?i+=e.childrenLength:i>=e.childrenLength&&(i-=e.childrenLength),t=Math.floor(i/e.items),!e.loop){var a=/^-?[0-9]+$/,s=a.test(e.childrenLength/e.items);s||e.index!==e.childrenLength-e.items||(t+=1)}for(var r=0;o>r;r++)r===t?addClass(n[r],"tiny-active"):removeClass(n[r],"tiny-active")},onNavClick:function(e,t){e.animating||(tdProp&&(e.container.style[tdProp]=e.speed/1e3+"s",e.animating=!0),e.slideByPage&&(t*=e.items),e.index+=t,e.loop||(e.index=Math.max(0,Math.min(e.index,e.childrenLength-e.items))),e.container.style.left=-(100*e.index/e.items)+"%",e.loop&&setTimeout(function(){tinySliderCore.prototype.fallback(e,t)},e.speed),setTimeout(function(){tinySliderCore.prototype.updateDotsStatus(e),e.animating=!1},e.speed))},fallback:function(e,t){tdProp&&(e.container.style[tdProp]="0s");var i=e.slideByPage?e.index<-(e.itemsMax-e.items):e.index<=-e.itemsMax,n=e.slideByPage?e.index>e.childrenLength+e.itemsMax-2*e.items-1:e.index>=e.childrenLength+e.itemsMax-e.items;i&&(e.index+=e.childrenLength),n&&(e.index-=e.childrenLength),e.container.style.left=-(100*e.index/e.items)+"%"},onDotClick:function(e,t){e.animating||(tdProp&&(e.container.style[tdProp]=e.speed/1e3+"s",e.animating=!0),e.index=t*e.items,e.loop||(e.index=Math.min(e.index,e.childrenLength-e.items)),e.container.style.left=-(100*e.index/e.items)+"%",setTimeout(function(){tinySliderCore.prototype.updateDotsStatus(e),e.animating=!1},e.speed))}};